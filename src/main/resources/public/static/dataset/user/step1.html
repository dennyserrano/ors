<div data-ng-controller="Step1Ctrl">
  
  <div class="col-sm-3 col-xs-12">
    <div id="sidebar-nav" class="sidebar navbar navbar-inverse collapse navbar-collapse" role="navigation">
      <div class="input-group custom-search-form" style="padding-top: 20px;">
        <input type="text" class="form-control" placeholder="Search..."/>
      <span class="input-group-btn">
        <button class="btn btn-default" type="button">
          <i class="fa fa-search"></i>
        </button>
      </span>
      </div>
      <div>
        <h4 style="color: white;">
          <i class="fa fa-database fa-fw"></i>
          Datasets
        </h4>
      </div>
      <ul id="side-menu" class="nav">
        <li data-ng-repeat="dataset in datasets">
          <a href="javascript:void(0);">
            {{ dataset.name }}
            <span class="fa arrow"></span>
          </a>
          <ul class="list-unstyled">
            <li data-ng-repeat="subdataset in dataset.subDatasets">
              <a class="subdataset" href="javascript:void(0);">
                <label>
                  <input type="checkbox" checklist-model="selectedDatasets" checklist-value="subdataset" data-ng-checked="datasetSelected(subdataset)"/>
                  <small>{{ subdataset.name }}</small>
                </label>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <div class="col-sm-9 col-xs-12">
    <div class="row">
      <div class="col-sm-12">
        <div style="margin-left:7px;" id="tracker">
          <div class="row smpl-step">
            
            <div class="col-xs-3 smpl-step-step {{ step1 }}">
              <div class="progress disabled">
                <div class="progress-bar"></div>
              </div>
              <a class="smpl-step-icon"><i class="fa fa-database" style="font-size: 23px; padding-left: 8px; padding-top: 5px; color: #fbbd19;"></i></a>
              <div class="smpl-step-info text-center"><small><span style="font-weight:bold; color:#118beb;">Step 1: </span> View  and Select Datasets</small></div>
            </div>

            <div class="col-xs-3 smpl-step-step {{ step2 }}">
              <div class="progress">
                <div class="progress-bar"></div>
              </div>
              <a class="smpl-step-icon"><i class="fa fa-check-square-o" style="font-size: 22px; padding-left: 8px; padding-top: 7px; color: #fbbd19;"></i></a>
              <div class="smpl-step-info text-center"><small><span style="font-weight:bold; color:#118beb;">Step 2: </span>Select Data Elements</small></div>
            </div>
            
            <div class="col-xs-3 smpl-step-step {{ step3 }}">
              <div class="progress">
                <div class="progress-bar"></div>
              </div>
              <a class="smpl-step-icon"><i class="fa fa-filter" style="font-size: 22px; padding-left: 9px; padding-top: 5px; color: #fbbd19;"></i></a>
              <div class="smpl-step-info text-center"><small><span style="font-weight:bold; color:#118beb;">Step 3: </span> Filter Data</small></div>
            </div>
            
            <div class="col-xs-3 smpl-step-step {{ step4 }}">
              <div class="progress">
                <div class="progress-bar"></div>
              </div>
              <a class="smpl-step-icon"><i class="fa fa-file " style="font-size: 22px; padding-left: 9px; padding-top: 5px; color: #fbbd19;"></i></a>
              <div class="smpl-step-info text-center"><small><span style="font-weight:bold; color:#118beb;">Step 4: </span> Generate Output</small></div>
            </div>
            
          </div>
        </div>
        <div class="alert alert-info" role="alert">
          <strong>STEP 1 </strong>View and select datasets from the Datasets menu. For each selected dataset, a definition and list of corresponding data elements wil display.<br/>
          <small><strong>Note: </strong>By default, School Basic Info dataset is selected as the basis of school identity.</small>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <h4>
          Selected Datasets
        </h4>
        <div class="list-group">
          <div data-ng-repeat="subdataset in selectedDatasets" data-ng-init="loadElements(subdataset)" class="list-group-item">
            <h4 class="list-group-item-heading">
              {{ subdataset.name }}
            </h4>
            <p class="list-group-item-text">
              {{ subdataset.description }}
            </p>
            <a class="elements" data-parent="#description-collapsible" data-toggle="collapse" data-target="#elements{{ subdataset.id }}">
              <i class="fa fa-caret-right"></i>
              <small>
                View Data Elements
              </small>
            </a>
            <div id="elements{{ subdataset.id }}" class="panel-collapse collapse">
              <table class="table table-condensed table-striped table-bordered" style="table-layout: fixed;">
                <thead>
                  <tr>
                    <td>
                      Element Name
                    </td>
                    <td>
                      Definition
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr data-ng-repeat="element in subdataset.elements">
                    <td>
                      {{ element.name }}
                    </td>
                    <td>
                      {{ element.meaning }}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="alert alert-warning alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert">
            <span aria-hidden="true">x</span>
            <span class="sr-only">Close</span>
          </button>
          <small>
            Are you done selecting datasets? If yes, click the next step button below.
            If you wish to add more, view and select additional dataset/s on the left menu.<br/>
            <strong>Note: </strong>
            You can delete selected dataset by clicking its title on the table above and deselecting it from the left menu.
          </small>
        </div>
        <button class="btn btn-primary" data-ng-click="save()">
          Next
        </button>
      </div>
    </div>
  </div>
</div>
